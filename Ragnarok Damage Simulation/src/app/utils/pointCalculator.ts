// 레벨별 특성스탯 포인트 획득 테이블
const TRAIT_STAT_POINTS = [
  ...Array(199).fill(0), // 1-199: 0 포인트
  7, 3, 3, 3, 3, // 200-204
  7, 3, 3, 3, 3, // 205-209
  7, 3, 3, 3, 3, // 210-214
  7, 3, 3, 3, 3, // 215-219
  7, 3, 3, 3, 3, // 220-224
  7, 3, 3, 3, 3, // 225-229
  7, 3, 3, 3, 3, // 230-234
  7, 3, 3, 3, 3, // 235-239
  7, 3, 3, 3, 3, // 240-244
  7, 3, 3, 3, 3, // 245-249
  7, 3, 3, 3, 3, // 250-254
  7, 3, 3, 3, 3, // 255-259
  7, 3, 3, 3, 3, // 260-264
  7, 3, 3, 3, 3, // 265-269
  7, 3, 3, 3, 3, // 270-274
  7 // 275
];

// 레벨별 스탯 포인트 획득 테이블
// 각 배열의 인덱스는 레벨-1에 해당 (예: index 0 = 레벨 1)
const STAT_POINTS_TYPE1 = [
  100, 3, 3, 3, 3, 4, 4, 4, 4, 4, // 1-10
  5, 5, 5, 5, 5, 6, 6, 6, 6, 6, // 11-20
  7, 7, 7, 7, 7, 8, 8, 8, 8, 8, // 21-30
  9, 9, 9, 9, 9, 10, 10, 10, 10, 10, // 31-40
  11, 11, 11, 11, 11, 12, 12, 12, 12, 12, // 41-50
  13, 13, 13, 13, 13, 14, 14, 14, 14, 14, // 51-60
  15, 15, 15, 15, 15, 16, 16, 16, 16, 16, // 61-70
  17, 17, 17, 17, 17, 18, 18, 18, 18, 18, // 71-80
  19, 19, 19, 19, 19, 20, 20, 20, 20, 20, // 81-90
  21, 21, 21, 21, 21, 22, 22, 22, 22, 22, // 91-100
  23, 23, 23, 23, 23, 23, 23, 23, 23, 23, // 101-110
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, // 111-120
  25, 25, 25, 25, 25, 25, 25, 25, 25, 25, // 121-130
  26, 26, 26, 26, 26, 26, 26, 26, 26, 26, // 131-140
  27, 27, 27, 27, 27, 27, 27, 27, 27, 27, // 141-150
  28, 28, 28, 28, 28, 28, 28, 29, 29, 29, // 151-160
  29, 29, 29, 29, 30, 30, 30, 30, 30, 30, // 161-170
  30, 31, 31, 31, 31, 31, 31, 31, 32, 32, // 171-180
  32, 32, 32, 32, 32, 33, 33, 33, 33, 33, // 181-190
  33, 33, 34, 34, 34, 34, 34, 34, 34, 35, // 191-200
  ...Array(75).fill(0) // 201-275: 0 포인트
];

const STAT_POINTS_TYPE2 = [
  48, 3, 3, 3, 3, 4, 4, 4, 4, 4, // 1-10
  5, 5, 5, 5, 5, 6, 6, 6, 6, 6, // 11-20
  7, 7, 7, 7, 7, 8, 8, 8, 8, 8, // 21-30
  9, 9, 9, 9, 9, 10, 10, 10, 10, 10, // 31-40
  11, 11, 11, 11, 11, 12, 12, 12, 12, 12, // 41-50
  13, 13, 13, 13, 13, 14, 14, 14, 14, 14, // 51-60
  15, 15, 15, 15, 15, 16, 16, 16, 16, 16, // 61-70
  17, 17, 17, 17, 17, 18, 18, 18, 18, 18, // 71-80
  19, 19, 19, 19, 19, 20, 20, 20, 20, 20, // 81-90
  21, 21, 21, 21, 21, 22, 22, 22, 22, 22, // 91-100
  23, 23, 23, 23, 23, 23, 23, 23, 23, 23, // 101-110
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, // 111-120
  25, 25, 25, 25, 25, 25, 25, 25, 25, 25, // 121-130
  26, 26, 26, 26, 26, 26, 26, 26, 26, 26, // 131-140
  27, 27, 27, 27, 27, 27, 27, 27, 27, 27, // 141-150
  28, 28, 28, 28, 28, 28, 28, 29, 29, 29, // 151-160
  29, 29, 29, 29, 30, 30, 30, 30, 30, 30, // 161-170
  30, 31, 31, 31, 31, 31, 31, 31, 32, 32, // 171-180
  32, 32, 32, 32, 32, 33, 33, 33, 33, 33, // 181-190
  33, 33, 34, 34, 34, 34, 34, 34, 34, 35, // 191-200
  ...Array(75).fill(0) // 201-275: 0 포인트
];

// 베이스 레벨에 따른 특성스탯 포인트 계산
export function calculateTraitStatPoints(baseLevel: number): number {
  if (baseLevel < 1 || baseLevel > 275) return 0;
  
  let totalPoints = 0;
  for (let i = 0; i < baseLevel; i++) {
    totalPoints += TRAIT_STAT_POINTS[i] || 0;
  }
  
  return totalPoints;
}

// 스탯 레벨별 필요 포인트 테이블
const STAT_POINT_COST = [
  0, // 1
  2, 2, 2, 2, 2, 2, 2, 2, 2, 2, // 2-11
  3, 3, 3, 3, 3, 3, 3, 3, 3, 3, // 12-21
  4, 4, 4, 4, 4, 4, 4, 4, 4, 4, // 22-31
  5, 5, 5, 5, 5, 5, 5, 5, 5, 5, // 32-41
  6, 6, 6, 6, 6, 6, 6, 6, 6, 6, // 42-51
  7, 7, 7, 7, 7, 7, 7, 7, 7, 7, // 52-61
  8, 8, 8, 8, 8, 8, 8, 8, 8, 8, // 62-71
  9, 9, 9, 9, 9, 9, 9, 9, 9, 9, // 72-81
  10, 10, 10, 10, 10, 10, 10, 10, 10, 10, // 82-91
  11, 11, 11, 11, 11, 11, 11, 11, 11, // 92-100
  16, 16, 16, 16, 16, // 101-105
  20, 20, 20, 20, 20, // 106-110
  24, 24, 24, 24, 24, // 111-115
  28, 28, 28, 28, 28, // 116-120
  32, 32, 32, 32, 32, // 121-125
  36, 36, 36, 36, 36  // 126-130
];

// 특정 스탯 레벨에 도달하기 위해 필요한 총 포인트 계산
export function calculateRequiredPoints(currentStat: number, targetStat: number): number {
  if (currentStat < 1 || targetStat < 1 || currentStat > 130 || targetStat > 130) return 0;
  if (currentStat >= targetStat) return 0;
  
  let totalCost = 0;
  for (let i = currentStat; i < targetStat; i++) {
    totalCost += STAT_POINT_COST[i] || 0;
  }
  
  return totalCost;
}

// 1부터 특정 스탯 레벨까지 필요한 총 포인트 계산
export function getTotalStatCost(statLevel: number): number {
  if (statLevel < 1 || statLevel > 130) return 0;
  return calculateRequiredPoints(1, statLevel);
}

// 다음 스탯 레벨 증가에 필요한 포인트
export function getNextStatCost(currentStat: number): number {
  if (currentStat < 1 || currentStat >= 130) return 0;
  return STAT_POINT_COST[currentStat] || 0;
}

// 베이스 레벨에 따른 스탯 포인트 계산
export function calculateStatPoints(baseLevel: number, jobType: 1 | 2 = 1): number {
  if (baseLevel < 1 || baseLevel > 275) return 0;
  
  const pointTable = jobType === 1 ? STAT_POINTS_TYPE1 : STAT_POINTS_TYPE2;
  
  let totalPoints = 0;
  for (let i = 0; i < baseLevel; i++) {
    totalPoints += pointTable[i] || 0;
  }
  
  return totalPoints;
}

// 잡 레벨에 따른 스킬 포인트 계산
export function calculateSkillPoints(jobLevel: number): number {
  if (jobLevel < 1) return 0;
  
  // 잡 레벨 -1 = 스킬 포인트 (레벨 1에서는 0포인트)
  return jobLevel - 1;
}