// 속성 매핑: warmWind value -> 속성표 열 인덱스
const warmWindToColumnIndex: { [key: string]: number } = {
  'neutralMagic': 0,  // 무속성 마법
  'waterMagic': 1,    // 수속성 마법
  'variableMagic': 2, // 지속성 마법
  'fireMagic': 3,     // 화속성 마법
  'windMagic': 4,     // 풍속성 마법
  'poisonMagic': 5,   // 독속성 마법
  'holyMagic': 6,     // 성속성 마법
  'shadowMagic': 7,   // 암속성 마법
  'ghostMagic': 8,    // 염속성 마법
  'undeadMagic': 9,   // 불사속성 마법
};

// 몬스터 속성 매핑: 속성명 -> 속성표 행 데이터
const monsterElementToRowData: { [key: string]: number[] } = {
  // 무속성 1-4
  '무속성1': [100, 100, 100, 100, 100, 100, 100, 100, 90, 100],
  '무속성2': [100, 100, 100, 100, 100, 100, 100, 100, 70, 100],
  '무속성3': [100, 100, 100, 100, 100, 100, 100, 100, 50, 100],
  '무속성4': [100, 100, 100, 100, 100, 100, 100, 100, 0, 100],
  // 수속성 1-4
  '수속성1': [100, 25, 100, 90, 150, 150, 100, 100, 100, 100],
  '수속성2': [100, 0, 100, 80, 175, 150, 100, 100, 100, 100],
  '수속성3': [100, 0, 100, 70, 200, 125, 100, 100, 100, 100],
  '수속성4': [100, 0, 100, 60, 200, 125, 100, 100, 100, 100],
  // 풍속성 1-4
  '풍속성1': [100, 90, 150, 100, 25, 150, 100, 100, 100, 100],
  '풍속성2': [100, 80, 175, 100, 0, 150, 100, 100, 100, 100],
  '풍속성3': [100, 70, 200, 100, 0, 125, 100, 100, 100, 100],
  '풍속성4': [100, 60, 200, 100, 0, 125, 100, 100, 100, 100],
  // 지속성 1-4
  '지속성1': [100, 100, 25, 150, 90, 150, 100, 100, 100, 100],
  '지속성2': [100, 100, 0, 175, 80, 150, 100, 100, 100, 100],
  '지속성3': [100, 100, 0, 200, 70, 125, 100, 100, 100, 100],
  '지속성4': [100, 100, 0, 200, 60, 125, 100, 100, 100, 100],
  // 화속성 1-4
  '화속성1': [100, 150, 90, 25, 100, 150, 100, 100, 100, 90],
  '화속성2': [100, 175, 80, 0, 100, 150, 100, 100, 100, 80],
  '화속성3': [100, 200, 70, 0, 100, 125, 100, 100, 100, 70],
  '화속성4': [100, 200, 60, 0, 100, 125, 100, 100, 100, 60],
  // 암속성 1-4
  '암속성1': [100, 100, 100, 100, 100, 75, 125, 0, 90, 0],
  '암속성2': [100, 100, 100, 100, 100, 75, 150, 0, 80, 0],
  '암속성3': [100, 100, 100, 100, 100, 50, 175, 0, 70, 0],
  '암속성4': [100, 100, 100, 100, 100, 50, 200, 0, 60, 0],
  // 염속성 1-4
  '염속성1': [90, 100, 100, 100, 100, 75, 100, 100, 125, 100],
  '염속성2': [70, 100, 100, 100, 100, 75, 100, 100, 150, 125],
  '염속성3': [50, 100, 100, 100, 100, 50, 100, 100, 175, 150],
  '염속성4': [0, 100, 100, 100, 100, 50, 100, 100, 200, 175],
  // 성속성 1-4
  '성속성1': [100, 100, 100, 100, 100, 75, 0, 125, 90, 125],
  '성속성2': [100, 100, 100, 100, 100, 75, 0, 150, 80, 150],
  '성속성3': [100, 100, 100, 100, 100, 50, 0, 175, 70, 175],
  '성속성4': [100, 100, 100, 100, 100, 50, 0, 200, 60, 200],
  // 불사속성 1-4
  '불사속성1': [100, 100, 100, 125, 100, 75, 125, 0, 100, 0],
  '불사속성2': [100, 100, 100, 150, 100, 50, 150, 0, 125, 0],
  '불사속성3': [100, 100, 100, 175, 100, 25, 175, 0, 150, 0],
  '불사속성4': [100, 100, 100, 200, 100, 0, 200, 0, 175, 0],
  // 독속성 1-4
  '독속성1': [100, 150, 150, 150, 150, 0, 75, 75, 75, 75],
  '독속성2': [100, 150, 150, 150, 150, 0, 75, 75, 75, 50],
  '독속성3': [100, 125, 125, 125, 125, 0, 50, 50, 50, 25],
  '독속성4': [100, 125, 125, 125, 125, 0, 50, 50, 50, 0],
};

/**
 * 따듯한 바람의 선택된 속성(공격)과 몬스터 속성(방어)의 교차값을 계산
 * @param warmWind - 따듯한 바람에서 선택된 공격 속성
 * @param monsterElement - 몬스터의 방어 속성
 * @returns 속성 데미지 배율 (100 = 기본, 200 = 2배, 0 = 무효)
 */
export function calculateElementModifier(warmWind: string, monsterElement: string): number {
  // warmWind가 선택되지 않았거나 몬스터 속성이 선택되지 않은 경우 기본값 100 반환
  if (!warmWind || !monsterElement) {
    return 100;
  }

  // warmWind에 해당하는 열 인덱스 찾기
  const columnIndex = warmWindToColumnIndex[warmWind];
  if (columnIndex === undefined) {
    return 100;
  }

  // 몬스터 속성에 해당하는 행 데이터 찾기
  const rowData = monsterElementToRowData[monsterElement];
  if (!rowData) {
    return 100;
  }

  // 교차값 반환
  return rowData[columnIndex];
}

/**
 * warmWind 값을 한글 표시명으로 변환
 */
export function getWarmWindDisplayName(warmWind: string): string {
  const displayNames: { [key: string]: string } = {
    'neutralMagic': '무속성 마법',
    'waterMagic': '수속성 마법',
    'variableMagic': '지속성 마법',
    'fireMagic': '화속성 마법',
    'windMagic': '풍속성 마법',
    'poisonMagic': '독속성 마법',
    'holyMagic': '성속성 마법',
    'shadowMagic': '암속성 마법',
    'ghostMagic': '염속성 마법',
    'undeadMagic': '불사속성 마법',
  };
  return displayNames[warmWind] || warmWind;
}
